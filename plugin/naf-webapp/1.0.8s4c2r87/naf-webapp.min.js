NAF.conf={debug:2,traxisip:"217.249.130.196",traxisid:"device1",chanlocsrc:"traxis",traxisidprefix:"CpeId",numhours:4,refreshInterval:10,refreshInterval0:1,reminderTime:5,pretune:!0,previouspretunes:0,followingpretunes:1,codcatalog:0,searchCacheSize:10,upcPrice:!1,maxPinAttempts:3,pinRetryInterval:300,wakeuptime:120,prerecordwakeuptime:3,teletextHandling:!1,langTimeOut:500,mediawareip:"",chanUpDownKeyHandling:!1,startChannel:"CNN",initChannel:"lastViewed",lockedChannels:[],profileAgeRating:21,enable000reload:!1,
canned:!1,cannedPath:"../data/217.149.130.199",useNewRecordingManager:!0,useUnifiedMapPlayer:!0,catchUpCategory:"crid:~~2F~~2Fschange.com~~2F4e3c5465-a7dc-4e7b-b94e-fd2b9eb6e500",catchUpChannel:0,genreData:JSON.stringify({genres:[{code:"1",name:"movie",subgenres:[]},{code:"2",name:"news",subgenres:[]},{code:"3",name:"show",subgenres:[]},{code:"4",name:"sports",subgenres:[]},{code:"5",name:"children's",subgenres:[]},{code:"6",name:"music",subgenres:[]},{code:"7",name:"arts",subgenres:[]},{code:"8",
name:"social",subgenres:[]},{code:"9",name:"education",subgenres:[]},{code:"10",name:"leisure",subgenres:[]},{code:"11",name:"special",subgenres:[]},{code:"12",name:"entertainment",subgenres:[]},{code:"13",name:"crime",subgenres:[]},{code:"14",name:"series",subgenres:[]},{code:"15",name:"adult",subgenres:[]}]}),provideDefaultSettings:!0,viewSettingLang:"ENG",viewSettingLangType:"NR",viewSettingTransparency:"opaque",viewSettingBannerTimeout:10,viewSettingEpgStyle:"overlay",viewSettingEpgSpan:90,viewSettingAssetsStyle:"mosaic",
viewSettingSettingsProtection:!1,pvrSettingFrontpad:0,pvrSettingBackpad:0,pvrSettingSeriesDomain:"single",pvrSettingDiskManagement:"automatic",outputSettingPrimary:"auto",outputSettingHDMIRes:"auto",outputSettingHDMIFormat:"full",outputSettingHDMIColor:"auto",outputSettingHDMIAudioEnable:!0,outputSettingHDMIAudioDelay:0,outputSettingSPDIFEnable:!0,outputSettingSPDIFDelay:0,outputSettingTVAspectRatio:"16:9",outputSettingTVStart:"auto",outputSettingSCARTFormat:"full",outputSettingSCARTColor:"cvbs",
outputSettingSCARTEnable:!0,outputSettingAudioFormat:"auto",outputSettingFPLuminosity:"0.75",standbySettingType:"off",standbySettingTimeout:0,standbySettingStartTime:"23:00",standbySettingEndTime:"05:00",standbySettingWeekdays:[!0,!0,!0,!0,!0,!0,!0],applications:[{id:"id1",name:"MetrologicalAppStore",shortSynopsis:"The Metrological App Store",isAdult:!1,isViewable:!0,isEntitled:!0,url:"http://widgets.metrological.com/dawn/be/development/",type:"store"}]};
function nafCleanupConf(){NAF.conf.canned&&(NAF.conf.traxisid="");if("undefined"!==typeof window){for(var f=[],h,l=window.location.href.slice(window.location.href.indexOf("?")+1).split("&"),e=0;e<l.length;e++)h=l[e].split("="),f.push(h[0]),f[h[0]]=h[1];for(e=0;e<f.length;e++)NAF.conf.hasOwnProperty(f[e])&&(h=f[f[e]],isNaN(h)?NAF.conf[f[e]]="true"===h?!0:"false"===h?!1:h:NAF.conf[f[e]]=parseFloat(h,10))}}nafCleanupConf();nafCleanupConf=null;
NAF.utils={convertJSONDateToJSDate:function(f){var h;return"string"===typeof f&&(h=/^(\d{4})-(\d{2})-(\d{2})T(\d{2}):(\d{2}):(\d{2}(?:\.\d*)?)Z$/.exec(f))?new Date(Date.UTC(+h[1],+h[2]-1,+h[3],+h[4],+h[5],+h[6])):h},convertLocalJSONDateToLocalJSDate:function(f){var h;return"string"===typeof f&&(h=/^(\d{4})-(\d{2})-(\d{2})T(\d{2}):(\d{2}):(\d{2}(?:\.\d*)?)Z$/.exec(f))?new Date(+h[1],+h[2]-1,+h[3],+h[4],+h[5],+h[6]):h},convertJSONDateToMins:function(f){f=/^(\d{4})-(\d{2})-(\d{2})T(\d{2}):(\d{2}):(\d{2}(?:\.\d*)?)Z$/.exec(f);
return(new Date(Date.UTC(+f[1],+f[2]-1,+f[3],+f[4],+f[5],+f[6]))).getTime()/6E4},convertJSONDateToJSDateCanned:function(f){var h,l=new Date;return"string"===typeof f&&(h=/^(\d{4})-(\d{2})-(\d{2})T(\d{2}):(\d{2}):(\d{2}(?:\.\d*)?)Z$/.exec(f))?new Date(Date.UTC(+l.getUTCFullYear(),+l.getUTCMonth(),+l.getUTCDate(),+h[4],+h[5],+h[6])):h},convertJSDateToJSONDate:function(f){var h=f.getUTCMonth()+1;10>h&&(h="0"+h);var l=f.getUTCDate();10>l&&(l="0"+l);var e=f.getUTCHours();10>e&&(e="0"+e);var c=f.getUTCMinutes();
10>c&&(c="0"+c);return f.getUTCFullYear()+"-"+h+"-"+l+"T"+e+":"+c+":00Z"},clearTimer:function(f){f&&clearTimeout(f)},encodeXML:function(f){return f.replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/'/g,"&apos;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/\t/g,"&#x9;").replace(/\n/g,"&#xA;").replace(/\r/g,"&#xD;")},throttle:function(f,h){function l(){e=null}var e,c,n;return function(){c=this;n=arguments;e||(result=f.apply(c,n),e=setTimeout(l,h))}},decimalToBinary:function(f,h){for(var l=
f,e=0,c=[];0<l;)e=l%2,l=Math.floor(l/2),c.unshift(e);l=h-c.length;if(0<l)for(e=0;e<l;e++)c.unshift(0);else if(0>l)return null;return c},Log:function(){function f(a,b){if(h&&a.rank<=r.rank){console.log((new Date).toISOString()+" "+a.text+" "+l+" "+b[0]);for(var g=1;g<b.length;g++)console.log(b[g])}}var h=!1,l="",e={text:" FATAL ",rank:0},c={text:" ERROR ",rank:1},n={text:" WARN  ",rank:2},d={text:" DEBUG ",rank:3},p={text:" TRACE ",rank:4},m={text:" INFO  ",rank:5},r=p;this.trace=function(){f(p,arguments)};
this.debug=function(){f(d,arguments)};this.info=function(){f(m,arguments)};this.warn=function(){f(n,arguments)};this.error=function(){f(c,arguments)};this.fatal=function(){f(e,arguments)};this.enable=function(){h=!0};this.disable=function(){h=!1};this.setAppName=function(a){l=a};this.setLevel=function(){return{fatal:function(){r=e},error:function(){r=c},warn:function(){r=n},debug:function(){r=d},trace:function(){r=p},info:function(){r=m}}}()}};
NAF.Map=function(f,h){function l(){var a=new XMLHttpRequest,b={};b.method=arguments[0];b.id=d++;b.jsonrpc=p;for(var g={},e=1;e<arguments.length;e+=2)g[arguments[e]]=arguments[e+1];b.params=g;b=JSON.stringify(b);g="/ajax?"+encodeURI(b);"undefined"!=typeof n&&""!=n&&(g="http://"+n+g);c.debug("MAP-REQ: "+b);a.open("GET",g,!1);a.setRequestHeader("Content-Type","application/json;charset=UTF-8");a.send(null);var q;try{q=JSON.parse(a.responseText)}catch(k){q={error:k,result:-1}}q.error?c.error("MAP-ERR: code="+
q.error.code+" message="+q.error.message):c.debug("MAP-RES: status="+a.status+" response="+a.responseText.substr(0,80));return q.result}function e(a,b,g){var e=b.callbackParams;delete b.callbackParams;var q=new XMLHttpRequest,k={};k.method=a;k.id=d++;k.jsonrpc=p;k.params=b;a=JSON.stringify(k);b="/ajax?"+encodeURI(a);"undefined"!=typeof n&&""!=n&&(b="http://"+n+b);c.debug("MAP-ASYNC-REQ: "+a);q.open("GET",b,!0);q.setRequestHeader("Content-Type","application/json;charset=UTF-8");q.onreadystatechange=
function(){if(4===q.readyState){var a;try{200==q.status?c.debug("MAP-ASYNC-RESPONSE: SUCCESS "+q.responseText):c.debug("MAP-ASYNC-RESPONSE: ERROR "+q.responseText),a=JSON.parse(q.responseText)}catch(b){a={error:b,result:-1}}a.error&&c.error("MAP-ERR: code="+a.error.code+" message="+a.error.message);g&&g(a.result,e)}};q.send(null)}var c=f.log,n=h,d=1,p="2.0",m,r=this;c.warn("***DEPRECATED key map in NAF.Map, moving to NAF.Model.KeyMap****\n");this.VK_EXIT=3;this.VK_BACK_SPACE=8;this.VK_ENTER=this.VK_OK=
13;this.VK_KEYBOARD=16;this.VK_ACCEPT=30;this.VK_SPACE=32;this.VK_PAGE_UP=33;this.VK_PAGE_DOWN=34;this.VK_HOME=36;this.VK_LEFT=37;this.VK_UP=38;this.VK_RIGHT=39;this.VK_DOWN=40;this.VK_0=48;this.VK_1=49;this.VK_2=50;this.VK_3=51;this.VK_4=52;this.VK_5=53;this.VK_6=54;this.VK_7=55;this.VK_8=56;this.VK_9=57;this.VK_A=65;this.VK_B=66;this.VK_C=67;this.VK_D=68;this.VK_E=69;this.VK_F=70;this.VK_G=71;this.VK_H=72;this.VK_I=73;this.VK_J=74;this.VK_K=75;this.VK_L=76;this.VK_M=77;this.VK_N=78;this.VK_O=79;
this.VK_P=80;this.VK_Q=81;this.VK_R=82;this.VK_S=83;this.VK_T=84;this.VK_U=85;this.VK_V=86;this.VK_W=87;this.VK_X=88;this.VK_Y=89;this.VK_Z=90;this.VK_RED=403;this.VK_GREEN=404;this.VK_BLUE=406;this.VK_YELLOW=405;this.VK_DELETE=127;this.VK_HELP=156;this.VK_POWER=409;this.VK_CHANNEL_UP=427;this.VK_CHANNEL_DOWN=428;this.VK_VOLUME_UP=447;this.VK_VOLUME_DOWN=448;this.VK_MUTE=449;this.VK_INFO=457;this.VK_GUIDE=458;this.VK_BACK=461;this.VK_MENU=462;this.VK_PAUSE=19;this.VK_REW=412;this.VK_STOP=413;this.VK_PLAY=
415;this.VK_REC=416;this.VK_FF=417;this.VK_REW_SKIP=424;this.VK_FWD_SKIP=425;this.VK_FAV=433;this.VK_TELETEXT=459;this.VK_SUBTITLE=460;this.SetAsyncEventHandlers=function(a,b,g){m=new EventSource("/server-sent-events");m.onopen=a;m.onmessage=function(a){a:{var e;try{e=JSON.parse(a.data)}catch(k){c.error("server-sent event parsing failed, event handler not invoked."+k);g("Invalid server-sent event");break a}"undefined"!==typeof e.method?b(e):(c.error("server-sent event is not a valid MW event, event handler not invoked."),
g("Invalid server-sent event"))}};m.onerror=function(e){var c;switch(e.target.readyState){case EventSource.CONNECTING:c="Eventsource reconnecting.";break;case EventSource.CLOSED:c="Eventsource closed. Creating a new one.",setTimeout(function(){r.SetAsyncEventHandlers(a,b,g)},1E4)}g(c)}};this.VidSetAnimationParameters=function(a,b,g,c,d,k){e("VidSetAnimationParameters",{windowId:a,bAnimate:b,duration:g,speed:speed,fps:d},k)};this.VidPretune=function(a,b,g){e("VidPreTune",{windowId:a,LocatorArray:b},
g)};this.VidStopPretune=function(a,b,g){e("VidStopPreTune",{windowId:a},g)};this.VidGetCurChan=function(a){e("VidGetCurChan",{},a)};this.VidGetLastChan=function(a){e("VidGetLastChan",{},a)};this.VidGetStartChan=function(){return null};this.VidDetune=function(a){e("VidDetune",{},a)};this.VidGetChanCount=function(a){e("VidGetChanCount",{},a)};this.VidGetChannelList=function(a,b){e("VidGetChannelList",{platform:a},b)};this.VidSetVideoWinSize=function(a,b,g,c,d,k){e("VidSetVideoWinSize",{x:a,y:b,w:g,
h:c,bPIP:d},k)};this.VidEnableCC=function(a,b){e("VidSetCloseCap",{enable:a},b)};this.VidGetAvailableAudioLang=function(a){e("GetAvailableAudioLanguages",{},a)};this.VidSetPrefAudioLang=function(a,b,g,c){var d={};d.language=a;d.type=b;d.callbackParams=c;e("SetAudioLanguagePreference",d,g)};this.VidGetPrefAudioLang=function(a){e("GetAudioLanguagePreference",{},a)};this.VidSetAudioLang=function(a,b,g){var c={};c.language=a;c.callbackParams=g;e("SetAudioLanguage",c,b)};this.VidGetAudioLang=function(a){e("GetAudioLanguage",
{},a)};this.VidSetResolution=function(a,b,g){e("VidSetResolution",{port:a,resolution:b},g)};this.VidStopPIP=function(a){e("VidStopPIP",{},a)};this.VidMakePipPrimary=function(a){e("VidMakePipPrimary",{},a)};this.VidGetAvailableSubtitleLang=function(a){e("GetAvailableSubtitleLanguages",{},a)};this.VidSetPrefSubtitleLang=function(a,b,g,c){var d={};d.language=a;d.type=b;d.callbackParams=c;e("SetSubtitleLanguagePreference",d,g)};this.VidGetPrefSubtitleLang=function(a){e("GetSubtitleLanguagePreference",
{},a)};this.VidGetSubtitleAvailability=function(a){e("GetSubtitleAvailability",{},a)};this.VidEnableSubtitle=function(a,b){var g={};g.enable=a;e("EnableSubtitle",g,b)};this.VidSetSubtitleLang=function(a,b,g){var c={};c.language=a;c.callbackParams=g;e("SetSubtitleLanguage",c,b)};this.VidGetSubtitleLang=function(a){e("GetSubtitleLanguage",{},a)};this.IsSubtitleEnabled=function(a){e("IsSubtitleEnabled",{},a)};this.VidSetPrefTeletextLang=function(a,b){return l("SetTeletextLanguage","language",a,"type",
b)};this.VidGetPrefTeletextLang=function(){};this.IsTeletextEnabled=function(a){e("IsTeletextEnabled",{},a)};this.EnableTeletext=function(a,b){e("EnableTeletext",{enable:a},b)};this.IsTeletextAvailable=function(a){e("IsTeletextAvailable",{},a)};this.VidSetTeletextLang=function(a,b){};this.VidGetTeletextLang=function(){};this.VidSpeakerMute=function(a,b){e("VidSpeakerMute",{flag:a},b)};this.VidDisplayVideoOn=function(a,b){e("VidDisplayVideoOn",{flag:a},b)};this.DlnaSetDeviceName=function(a,b){return l("MapDLNASetDeviceName",
"name",a,"type",b)};this.DlnaGetDeviceName=function(a){return l("MapDLNAGetDeviceName","type",a)};this.MapDLNAGetActiveDevices=function(a){return l("MapDLNAGetActiveDevices","type",a)};this.MapDLNAGetContainer=function(a,b,g,c,d,k,s,f){if(f)e("MapDLNAGetContainer",{id:a,containerId:b,containerType:g,filter:c,startAt:d,requestedCount:k,sort:s},f);else return l("MapDLNAGetContainer","id",a,"containerId",b,"containerType",g,"filter",c,"startAt",d,"requestedCount",k,"sort",s)};this.MapPlayer=function(a,
b,g,c,d,k,s,f,n,p,l){var m={};m.type=d;m.x=k;m.y=s;m.width=f;m.height=n;d={};l&&(d.callbackParams=l);d.ver="1.0";d.url=a;d.block=b;d.rate=g;d.playPos=c;d.window=m;e("MapPlayer",d,p)};this.MapPlayerRTSPVod=function(a,b,g,c,d,k,s,f,n,p){var l={};l.type=d;l.x=k;l.y=s;l.width=f;l.height=n;d={ver:"1.0"};d.id=a;d.block=b;d.rate=g;d.playPos=c;d.window=l;e("MapPlayer",d,p)};this.MapPlayerStop=function(a,b,g,c,d,k){var s={};s.type=a;s.x=b;s.y=g;s.width=c;s.height=d;e("MapPlayer",{ver:"1.0",window:s},k)};this.MapPlayerSkip=
function(a,b,g,c,d,k,s,f,n){var p={};p.type=c;p.x=d;p.y=k;p.width=s;p.height=f;e("MapPlayer",{ver:"1.0",url:a,rate:b,playPos:g,window:p},n)};this.DvrSync=function(){return l("PvrSync")};this.DvrRecord=function(a,b,g,c,d,k){return l("PvrSchedRecording","locator",a,"channelId",b,"duration",g,"title",c,"description",d,"start",k)};this.DvrRecordEvent=function(a){console.log("DvrRecordEvent: "+a);return l("PvrSchedRecording","eventCrid",a)};this.DvrRecordSeries=function(a){console.log("DvrRecordSeries: "+
a);return l("PvrSchedRecording","seriesCrid",a)};this.DvrUpdateRecord=function(a,b,g){return null==b?(console.log("DvrUpdateRecord(): duration is null!!!"),null==g&&console.log("DvrUpdateRecord(): nothing to update!!!"),l("PvrUpdateRecording","recordingId",a,"start",g)):null==g?(console.log("DvrUpdateRecord(): startTime is null!!!"),l("PvrUpdateRecording","recordingId",a,"duration",b)):l("PvrUpdateRecording","recordingId",a,"duration",b,"start",g)};this.DvrAssetList=function(a){e("PvrListRecording",
{},a)};this.DvrListRequests=function(a){if(a)e("PvrListRequests",{},a);else return l("PvrListRequests")};this.DvrListOperations=function(a){if(a)e("PvrListOperations",{},a);else return l("PvrListOperations")};this.DvrListRecordings=function(a){if(a)e("PvrListRecordings",{},a);else return l("PvrListRecordings")};this.DvrPause=function(a){e("PvrPlayTrick",{speed:0},a)};this.DvrResume=function(a){e("PvrPlayTrick",{speed:100},a)};this.DvrFastForward=function(a,b){e("PvrPlayTrick",{speed:a},b)};this.DvrRewind=
function(a,b){e("PvrPlayTrick",{speed:-a},b)};this.DvrOffset=function(a,b){e("PvrPlaySkip",{offset:a},b)};this.DvrDelete=function(a,b){e("PvrDeleteRecording",{locator:a},b)};this.DvrDeleteRequest=function(a,b){e("PvrDelete",{requestId:a},b)};this.DvrDeleteOperation=function(a,b){e("PvrDelete",{operationId:a},b)};this.DvrDeleteRecording=function(a,b){e("PvrDelete",{recordingId:a},b)};this.DvrDeleteProtectOperation=function(a,b,g){e("PvrDeleteProtect",{operationId:a,protect:b},g)};this.DvrPinProtectOperation=
function(a,b,g){e("PvrPinProtect",{operationId:a,protect:b},g)};this.DvrStop=function(a){e("DvrStop",{},a)};this.PvrStop=function(a){e("PvrStop",{},a)};this.DvrStopRecording=function(a,b){e("PvrStopRecording",{recordingId:a},b)};this.VodSessionOpen=function(a,b,g){e("VodSessionOpen",{assetId:a,vodType:b},g)};this.VodSessionClose=function(a){e("VodSessionClose",{},a)};this.VodPlay=function(a,b,g){e("VodPlay",{blocked:a,start:b},g)};this.VodPause=function(a){e("VodPause",{},a)};this.VodFastforward=
function(a,b,g){e("VodFastforward",{numerator:a,denominator:b},g)};this.VodRewind=function(a,b,g){e("VodRewind",{numerator:a,denominator:b},g)};this.VodStop=function(a){e("VodStop",{},a)};this.VodGet=function(a,b){e("VodGet",{name:a},b)};this.VodSet=function(a,b,g){e("VodSet",{name:a,value:b},g)};this.VodPlaySkip=function(a,b){e("VodPlaySkip",{offset:a},b)};this.VodResume=function(a){e("VodFastforward",{numerator:1,denominator:1},a)};this.ConfigGet=function(a,b){e("ConfigGet",{name:a},b)};this.ConfigSet=
function(a,b){return l("ConfigSet","name",a,"value",b)};this.GetMWConfig=function(a,b,g){e("GetMWConfig",{section:a,key:b},g)};this.EmulateRemoteKey=function(a){return l("EmulateRemoteKey","KeyCode",a)};this.VerifyPin=function(a,b,g,c,d){var k={},k={profile:a,type:b,pin:g};k.callbackParams=d;e("VerifyPin",k,c)};this.ResetPin=function(a,b,g,c,d,k){var s={},s={profile:a,type:b,masterpin:g,newpin:c};s.callbackParams=k;e("ResetPin",s,d)};this.GetPinState=function(a,b){e("GetPinState",{profile:a,type:b},
callback)};this.ActivatePin=function(a,b,g,c){e("ActivatePin",{profile:a,type:b,masterpin:masterpin,activate:c},callback)};this.ProfileSetInitChan=function(a,b,g,c){var d={};c&&(d.callbackParams=c);d.profileId=a;-1!=a.indexOf("MasterProfile")&&(d.keyword="master");d.Settings={};d.Settings.initChannel=b;e("WriteProfile",d,g)};this.ProfileGetInitChan=function(a,b,g){var c={};g&&(c.callbackParams=g);c.profileId=a;c.Settings=["initChannel"];e("ReadProfile",c,b)};this.ProfileSetAgeRating=function(a,b,
g,c){b=b?b:1001;var d={};c&&(d.callbackParams=c);d.profileId=a;-1!=a.indexOf("MasterProfile")&&(d.keyword="master");d.Settings={};d.Settings.ageRating=b;e("WriteProfile",d,g)};this.ProfileGetAgeRating=function(a,b,c){var d={};c&&(d.callbackParams=c);d.profileId=a;d.Settings=["ageRating"];e("ReadProfile",d,b)};this.ProfileSetStartupProtection=function(a,b,c,d){var f={};d&&(f.callbackParams=d);f.profileId=a;-1!=a.indexOf("MasterProfile")&&(f.keyword="master");f.Settings={};f.Settings.startupProtection=
b;e("WriteProfile",f,c)};this.SetStandbyMode=function(a,b,c,d){e("SetStandbyMode",{mode:a,time:b,callbackParams:d},c)};this.AcknowledgePowerManagerEvent=function(a){e("AcknowledgePowerManagerEvent",{},a)};this.PesGetAllEvents=function(a,b){e("GetAllEvents",{filter:a},b)};this.PesGetChannelsWithEvent=function(a,b,c,d){e("GetChannelsWithEvent",{ChanFilter:a,ChanProps:b,EventFilter:c},d)};this.PesGetEventsByChanId=function(a,b){return l("GetEventsByChanId","chanId",a,"filter",b)};this.PesGetEventsByLcn=
function(a,b){return l("GetEventsByLcn","lcn",a,"filter",b)};this.PesGetPfEventsByChanId=function(a){return l("GetPfEventsByChanId","chanId",a)};this.PesGetPfEventsByLcn=function(a){return l("GetPfEventsByLcn","lcn",a)};this.MapGetOnlineMode=function(a){e("MapGetOnlineMode",{},a)};this.writePVRProfile=function(a,b,c,d){var f={};f.callbackParams=d;f.profileId=a;-1!=a.indexOf("MasterProfile")&&(f.keyword="master");f.Settings={};f.Settings.pvrSettings={};f.Settings.pvrSettings.frontPad=void 0!=b.newFrontPad?
b.newFrontPad:b.frontPad;f.Settings.pvrSettings.backPad=void 0!=b.newBackPad?b.newBackPad:b.backPad;f.Settings.pvrSettings.seriesDomain=void 0!=b.newSeriesDomain?b.newSeriesDomain:b.seriesDomain;f.Settings.pvrSettings.diskManagement=void 0!=b.newDiskManagement?b.newDiskManagement:b.diskManagement;e("WriteProfile",f,c)};this.readPVRProfile=function(a,b,c){var d={};c&&(d.callbackParams=c);d.profileId=a;-1!=a.indexOf("MasterProfile")&&(d.keyword="master");d.Settings=["pvrSettings"];e("ReadProfile",d,
b)};this.writeViewSettingsProfile=function(a,b,c,d,f){var k={};k.callbackParams=f;k.profileId=a;-1!=a.indexOf("MasterProfile")&&(k.keyword="master");k.Settings={};k.Settings.viewSettings={};k.Settings.viewSettings.lang=void 0!=b.newCode?b.newCode:b.code;k.Settings.viewSettings.langType=void 0!=b.newType?b.newType:b.type;k.Settings.viewSettings.transparency=void 0!=c.newTransparency?c.newTransparency:c.transparency;k.Settings.viewSettings.bannerTimeout=void 0!=c.newBannerTimeout?c.newBannerTimeout:
c.bannerTimeout;k.Settings.viewSettings.epgStyle=void 0!=c.newEpgStyle?c.newEpgStyle:c.epgStyle;k.Settings.viewSettings.epgSpan=void 0!=c.newEpgSpan?c.newEpgSpan:c.epgSpan;k.Settings.viewSettings.assetsStyle=void 0!=c.newAssetsStyle?c.newAssetsStyle:c.assetsStyle;k.Settings.viewSettings.settingsProtection=void 0!=c.newSettingsProtection?c.newSettingsProtection:c.settingsProtection;e("WriteProfile",k,d)};this.readViewSettingsProfile=function(a,b,c){var d={};c&&(d.callbackParams=c);d.profileId=a;-1!=
a.indexOf("MasterProfile")&&(d.keyword="master");d.Settings=["viewSettings"];e("ReadProfile",d,b)};this.writeOutputSettingsProfile=function(a,b,c,d){var f={};f.callbackParams=d;f.profileId=a;-1!=a.indexOf("MasterProfile")&&(f.keyword="master");f.Settings={};f.Settings.outputSettings={};f.Settings.outputSettings.primary=void 0!=b.newPrimary?b.newPrimary:b.primary;f.Settings.outputSettings.hdmiResolution=void 0!=b.hdmi.newResolution?b.hdmi.newResolution:b.hdmi.resolution;f.Settings.outputSettings.hdmiFormat=
void 0!=b.hdmi.newFormat?b.hdmi.newFormat:b.hdmi.format;f.Settings.outputSettings.hdmiColor=void 0!=b.hdmi.newColor?b.hdmi.newColor:b.hdmi.color;f.Settings.outputSettings.hdmiAudioEnable=void 0!=b.hdmi.audio.newEnable?b.hdmi.audio.newEnable:b.hdmi.audio.enable;f.Settings.outputSettings.hdmiAudioDelay=void 0!=b.hdmi.audio.newDelay?b.hdmi.audio.newDelay:b.hdmi.audio.delay;f.Settings.outputSettings.spdifEnable=void 0!=b.spdif.newEnable?b.spdif.newEnable:b.spdif.enable;f.Settings.outputSettings.spdifDelay=
void 0!=b.spdif.newDelay?b.spdif.newDelay:b.spdif.delay;f.Settings.outputSettings.tvAspectRatio=void 0!=b.tv.newAspectRatio?b.tv.newAspectRatio:b.tv.aspectRatio;f.Settings.outputSettings.tvStart=void 0!=b.tv.newStart?b.tv.newStart:b.tv.start;f.Settings.outputSettings.scartFormat=void 0!=b.scart.newFormat?b.scart.newFormat:b.scart.format;f.Settings.outputSettings.scartColor=void 0!=b.scart.newColor?b.scart.newColor:b.scart.color;f.Settings.outputSettings.scartEnable=void 0!=b.scart.newEnable?b.scart.newEnable:
b.scart.enable;f.Settings.outputSettings.audioFormat=void 0!=b.audio.newFormat?b.audio.newFormat:b.audio.format;f.Settings.outputSettings.fpLuminosity=void 0!=b.frontPanel.newLuminosity?b.frontPanel.newLuminosity:b.frontPanel.luminosity;e("WriteProfile",f,c)};this.readOutputSettingsProfile=function(a,b,c){var d={};c&&(d.callbackParams=c);d.profileId=a;-1!=a.indexOf("MasterProfile")&&(d.keyword="master");d.Settings=["outputSettings"];e("ReadProfile",d,b)};this.VidGetTSBInfo=function(a){e("GetTSBInfo",
{},a)};this.VidGetTSBEventInfo=function(a){e("GetTSBEventInfo",{},a)};this.SubscribePlayerPosition=function(a,b){e("MAPSubscribeEvent",{name:"MWPlayerPosition",frequency:a},b)};this.UnsubscribePlayerPosition=function(a){e("MAPUnsubscribeEvent",{name:"MWPlayerPosition"},a)};this.SubscribeTSBEventInfo=function(a){e("MAPSubscribeEvent",{name:"TSBEventInfo"},a)};this.UnsubscribeTSBEventInfo=function(a){e("MAPUnsubscribeEvent",{name:"TSBEventInfo"},a)};this.AdjustUserAgeRating=function(a,b){e("AdjustUserAgeRating",
{tempAgeRating:a},b)};this.RevertUserAgeRating=function(a){e("RevertUserAgeRating",{},a)};this.GetDiagnostics=function(a){e("GetDiagnostics",{},a)};this.SendDiagMsg=function(a,b,c){l("Echo","method","DiagResult","result",a,"command",b,"message",c)};this.GetStandbyModeSettings=function(a){e("GetStandbyModeSettings",{},a)};this.SetStandbyModeSettings=function(a,b,c,d,f,k){e("SetStandbyModeSettings",{autoStandby:a,timeout:b,startTime:c,endTime:d,weekday:f},k)}};
pmrpc=self.pmrpc=function(){function f(){for(var a=[],b=0;36>b;b++)a[b]="0123456789ABCDEF"[Math.floor(16*Math.random())];a[14]="4";a[19]="89AB"[Math.floor(4*Math.random())];a[8]=a[13]=a[18]=a[23]="-";return a.join("")}function h(a,b){for(var c=a.whitelist,d=a.blacklist,k=!1,e=!1,f=0;f<c.length;++f)if(b.match(RegExp(c[f]))){k=!0;break}for(c=0;c<d.length;++c)if(b.match(RegExp(d[c]))){e=!0;break}return k&&!e}function l(a,b,c,d){if(!(c instanceof Array)){for(var k=a.toString(),e=k.substring(k.indexOf("(")+
1,k.indexOf(")")),e=""===e?[]:e.split(", "),k={},f=0;f<e.length;f++)k[e[f]]=f;var e=[],g;for(g in c)if("undefined"!==typeof k[g])e[k[g]]=c[g];else throw"No such param: "+g;c=e}"undefined"!==typeof d&&(c=c.concat(d));return a.apply(b,c)}function e(a,b,c){var k={jsonrpc:"2.0"};k.method=a;k.params=b;"undefined"!==typeof c&&(k.id=c);return k}function c(a,b,c){var k={};k.code=a;k.message=b;k.data=c;return k}function n(a,b,c){var k={jsonrpc:"2.0"};k.id=c;"undefined"===typeof a||null===a?k.result="undefined"===
b?null:b:k.error=a;return k}function d(a){if(a.publicProcedureName in v)return!1;s[a.publicProcedureName]={publicProcedureName:a.publicProcedureName,procedure:a.procedure,context:a.procedure.context,isAsync:"undefined"!==typeof a.isAsynchronous?a.isAsynchronous:!1,acl:"undefined"!==typeof a.acl?a.acl:{whitelist:["(.*)"],blacklist:[]}};return!0}function p(a){var c=a.event,k=a.source,d="undefined"!==typeof k&&null!==k;0===c.data.indexOf("pmrpc.")&&(a=JSON.parse(c.data.substring(6)),"undefined"!==typeof a.method?
(c={data:c.data,source:d?k:c.source,origin:d?"*":c.origin,shouldCheckACL:!d},a=m(a,c),null!==a&&b(c.source,a,c.origin)):r(a))}function m(a,k,d){if("2.0"!==a.jsonrpc)return n(c(-32600,"Invalid request.","The recived JSON is not a valid JSON-RPC 2.0 request."),null,null);var e=a.id;d=s[a.method];if("undefined"!==typeof d)if(!k.shouldCheckACL||h(d.acl,k.origin))try{if(d.isAsync)return l(d.procedure,d.context,a.params,[function(a){b(k.source,n(null,a,e),k.origin)},function(a){b(k.source,n(c(-1,"Application error.",
a.message),null,e),k.origin)},k]),null;var f=l(d.procedure,d.context,a.params,[k]);return"undefined"===typeof e?null:n(null,f,e)}catch(g){return"undefined"===typeof e?null:g.match("^(No such param)")?n(c(-32602,"Invalid params.",g.message),null,e):n(c(-1,"Application error.",g.message),null,e)}else return"undefined"===typeof e?null:n(c(-2,"Application error.","Access denied on server."),null,e);else return"undefined"===typeof e?null:n(c(-32601,"Method not found.","The requestd remote procedure does not exist or is not available."),
null,e)}function r(a){var c=a.id,b=u[c];if("undefined"!==typeof b&&null!==b)if(delete u[c],"undefined"===typeof a.error)b.onSuccess({destination:b.destination,publicProcedureName:b.publicProcedureName,params:b.params,status:"success",returnValue:a.result});else b.onError({destination:b.destination,publicProcedureName:b.publicProcedureName,params:b.params,status:"error",message:a.error.message+" "+a.error.data})}function a(a){if(a.retries&&0>a.retries)throw new Exception("number of retries must be 0 or higher");
var b=[];if("undefined"===typeof a.destination||null===a.destination||"workerParent"===a.destination)b=[{context:null,type:"workerParent"}];else if("publish"===a.destination)b=k().concat(w);else if(a.destination instanceof Array)for(var c=0;c<a.destination.length;c++)"workerParent"===a.destination[c]?b.push({context:null,type:"workerParent"}):"undefined"!==typeof a.destination[c].frames?b.push({context:a.destination[c],type:"window"}):b.push({context:a.destination[c],type:"worker"});else"undefined"!==
typeof a.destination.frames?b.push({context:a.destination,type:"window"}):b.push({context:a.destination,type:"worker"});for(c=0;c<b.length;c++){var d={destination:b[c].context,destinationDomain:"undefined"===typeof a.destinationDomain?["*"]:"string"===typeof a.destinationDomain?[a.destinationDomain]:a.destinationDomain,publicProcedureName:a.publicProcedureName,onSuccess:"undefined"!==typeof a.onSuccess?a.onSuccess:function(){},onError:"undefined"!==typeof a.onError?a.onError:function(){},retries:"undefined"!==
typeof a.retries?a.retries:5,timeout:"undefined"!==typeof a.timeout?a.timeout:500,status:"requestNotSent"};isNotification="undefined"===typeof a.onError&&"undefined"===typeof a.onSuccess;params="undefined"!==typeof a.params?a.params:[];callId=f();u[callId]=d;d.message=isNotification?e(a.publicProcedureName,params):e(a.publicProcedureName,params,callId);g(callId)}}function b(a,b,c){if("undefined"===typeof a||null===a)self.postMessage("pmrpc."+JSON.stringify(b));else{if("undefined"!==typeof a.frames)return a.postMessage("pmrpc."+
JSON.stringify(b),c);a.postMessage("pmrpc."+JSON.stringify(b))}}function g(k){var d=u[k];if("undefined"!==typeof d)if(-1>=d.retries)r(n(c(-4,"Application error.","Destination unavailable."),null,k));else if("requestSent"!==d.status)if(0===d.retries||"available"===d.status){d.status="requestSent";d.retries=-1;u[k]=d;for(var e=0;e<d.destinationDomain.length;e++)b(d.destination,d.message,d.destinationDomain[e],d),self.setTimeout(function(){g(k)},d.timeout)}else d.status="pinging",d.retries-=1,a({destination:d.destination,
publicProcedureName:"receivePingRequest",onSuccess:function(a){!0===a.returnValue&&"undefined"!==typeof u[k]&&(u[k].status="available",g(k))},params:[d.publicProcedureName],retries:0,destinationDomain:d.destinationDomain}),u[k]=d,self.setTimeout(function(){u[k]&&"pinging"===u[k].status&&g(k)},d.timeout/d.retries)}function t(a,b,c,k){"addEventListener"in a?a.addEventListener(b,c,k):a.attachEvent("on"+b,c)}function q(a,b,c){return function(k){a({event:k,source:b,destinationType:c})}}function k(){var a=
[];if("undefined"!==typeof window){a.push({context:window.top,type:"window"});for(var b=0;"undefined"!==typeof a[b];b++)for(var c=a[b],k=0;k<c.context.frames.length;k++)a.push({context:c.context.frames[k],type:"window"})}else a.push({context:this,type:"workerParent"});return a}if("undefined"===typeof JSON||"undefined"===typeof JSON.stringify||"undefined"===typeof JSON.parse)throw"pmrpc requires the JSON library";if("undefined"===typeof this.postMessage&&"undefined"===typeof this.onconnect)throw"pmrpc requires the HTML5 cross-document messaging and worker APIs";
var s={},u={},v={};if("window"in this){var x=q(p,null,"window");t(this,"message",x,!1)}else if("onmessage"in this)x=q(p,this,"worker"),t(this,"message",x,!1);else if("onconnect"in this)t(this,"connect",function(a){var b=q(p,a.ports[0],"sharedWorker");t(a.ports[0],"message",b,!1);a.ports[0].start()},!1);else throw"Pmrpc must be loaded within a browser window or web worker.";var y=this.Worker;this.nonPmrpcWorker=y;var z=this.SharedWorker;this.nonPmrpcSharedWorker=z;var w=[];this.Worker=function(a){a=
new y(a);w.push({context:a,type:"worker"});var b=q(p,a,"worker");t(a,"message",b,!1);return a};this.SharedWorker=function(a,b){var c=new z(a,b);w.push({context:c,type:"sharedWorker"});var k=q(p,c.port,"sharedWorker");t(c.port,"message",k,!1);c.postMessage=function(a,b){return c.port.postMessage(a,b)};c.port.start();return c};d({publicProcedureName:"receivePingRequest",procedure:function(a){return"undefined"!==typeof s[a]}});d({publicProcedureName:"getRegisteredProcedures",procedure:function(){var a=
[],b="undefined"!==typeof this.frames?window.location.protocol+"//"+window.location.host+(""!==window.location.port?":"+window.location.port:""):"",c;for(c in s)c in v||a.push({publicProcedureName:s[c].publicProcedureName,acl:s[c].acl,origin:b});return a}});v={getRegisteredProcedures:null,receivePingRequest:null};return{register:d,unregister:function(a){if(a in v)return!1;delete s[a];return!0},call:a,discover:function(a){var b=null;if("undefined"===typeof a.destination)for(var b=k().concat(w),c=0;c<
b.length;c++)b[c]=b[c].context;else b=a.destination;var d="undefined"===typeof a.originRegex?"(.*)":a.originRegex,e="undefined"===typeof a.nameRegex?"(.*)":a.nameRegex,f=b.length,g=[];pmrpc.call({destination:b,destinationDomain:"*",publicProcedureName:"getRegisteredProcedures",onSuccess:function(b){f--;var c=b.returnValue;b=b.destination;for(var k=0;k<c.length;k++)c[k].origin.match(RegExp(d))&&c[k].publicProcedureName.match(RegExp(e))&&g.push({publicProcedureName:c[k].publicProcedureName,destination:b,
procedureACL:c[k].acl,destinationOrigin:c[k].origin});0===f&&a.callback(g)},onError:function(b){f--;0===f&&a.callback(g)}})}}}();"function"==typeof define&&define.amd&&define(pmrpc);
WebApp.Controller=function(f){function h(a){g.debug("WebApp.Controller: received init reply");f.channels=a.returnValue[0];f.state.players=a.returnValue[1];f.state.applications=a.returnValue[2];f.initialized=!0;g.debug("WebApp.Controller: WebApp.model is initialized");d("model.initialized")}function l(a,b,c){var d=a[b][c];a=f.state.applications[b][c];d=d instanceof Object?JSON.stringify(d).substring(0,100):d;a=a instanceof Object?JSON.stringify(a).substring(0,100):a;return"model.state.applications."+
b+"."+c+" changed from "+d+" to "+a}function e(a,b,c){var d=a[b][c];a=f.state.players[b][c];d=d instanceof Object?JSON.stringify(d).substring(0,100):d;a=a instanceof Object?JSON.stringify(a).substring(0,100):a;return"model.state.players."+b+"."+c+" changed from "+d+" to "+a}function c(a,b){return!n(a,b)&&!!(null!==a&&void 0!==a||null!==b&&void 0!==b)}function n(a,b){if(a instanceof Function)return b instanceof Function?a.toString()===b.toString():!1;if(null===a||void 0===a||null===b||void 0===b)return a===
b;if(a===b||a.valueOf()===b.valueOf())return!0;if(a instanceof Date||b instanceof Date||!(a instanceof Object)||!(b instanceof Object))return!1;var c=Object.keys(a);return Object.keys(b).every(function(a){return-1!==c.indexOf(a)})?c.every(function(c){return n(a[c],b[c])}):!1}function d(a){g.debug("WebApp.Controller: notifyView('"+a+"')");try{b.emit(a,a)}catch(c){g.error("WebApp.Controller: error thrown by child webapp processing model event - "+c),c.stack&&g.error(c.stack)}}function p(b,c,d){void 0==
d&&(d=m);c.splice(0,0,a.getApplicationIndex("unknown"));g.debug("WebApp.Controller: sending pmrpc call to master controller - "+b+"("+JSON.stringify(c)+")");pmrpc.call({destination:window.top,publicProcedureName:b,params:[c],timeout:3E3,onSuccess:d,onError:r})}function m(a){g.trace("WebApp.Controller: pmrpc message ("+a.publicProcedureName+") delivery confirmed");void 0!=a.returnValue&&(g.debug("WebApp.Controller: object returned from pmrpc message send:  "+JSON.stringify(a.returnValue)),g.warn("WebApp.Controller: this return object is ignored"))}
function r(a){g.error("WebApp.Controller: pmrpc message "+a.publicProcedureName+"("+JSON.stringify(a.params)+") send FAILED");g.error("WebApp.Controller: error status info returned: "+a.message)}var a=this;f=f?f:new WebApp.Model;var b=new WebApp.EventEmitter({wildcard:!0}),g=new NAF.utils.Log,t;t=["model.channels","model.state.players","model.state.applications"];g.enable();0===NAF.conf.debug?g.setLevel.error():1===NAF.conf.debug?g.setLevel.warn():2===NAF.conf.debug?g.setLevel.debug():3===NAF.conf.debug?
g.setLevel.trace():4===NAF.conf.debug?g.setLevel.info():g.disable();this.on=function(a,c){b.on(a,c)};this.off=function(a,c){b.off(a,c)};this.init=function(){p("init",t,h)};this["do"]=function(b,c){if(b.match(/^model\.state\.applications\.\d+\.appMsg$/)&&c instanceof Object)if(void 0==c.sourceId){var d;try{d=a.getApplicationIndex(),c.sourceId=f.state.applications[d].id,g.debug("WebApp.Controller: supplying appMsg sourceId - "+c.sourceId+" for app #"+d)}catch(e){c.sourceId="unknown"}}else g.debug("WebApp.Controller: using webapp-supplied appMsg sourceId - "+
c.sourceId);c instanceof Object&&(c.serializedObjectType=c.constructor.name,g.debug("WebApp.Controller: serializing object type of do() argument and embedding type name - "+c.constructor.name));p("do",[b,c])};this.load=function(a,c){p("load",[a,c])};this.registerPMRPC=function(){pmrpc.register({publicProcedureName:"update-model",procedure:function(c){try{g.trace("WebApp.Controller: pmrpc message received - "+c),a.UpdateModel(c)}catch(b){g.error("WebApp.Controller: error processing model update - "+
b),g.error(b.stack)}}})};this.UpdateModel=function(a){if("key"===a[0])g.debug("WebApp.Controller: key input received - "+JSON.stringify(a[1])),f.state.key=a[1],d("model.state.key");else if("application"==a[0]){var b=f.state.applications[a[1]].inFocus;f.state.applications[a[1]].inFocus="true"==a[2];if(f.state.applications[a[1]].inFocus)if(b){for(var b=f.state.applications,n=parseInt(a[1]),p=0;p<b.length;p++)if(p!==n){var m=f.state.applications[p].inFocus;f.state.applications[p].inFocus=!1;m&&d("model.state.applications."+
p)}g.debug("WebApp.Controller: focus set on app "+a[1]);d("model.state.applications."+a[1])}else g.trace("app "+a[1]+" already had focus");else g.trace("WebApp.Controller: focus unset on app "+a[1])}else if("channels"==a[0])g.debug("WebApp.Controller: channel array update received"),f.channels=a[1];else if("applications"==a[0]){if(g.debug("WebApp.Controller: application array update received"),b=f.state.applications,f.state.applications=a[1],0!=b.length)for(a=0;a<b.length;a++)if(c(b[a].state,f.state.applications[a].state)&&
(g.debug("WebApp.Controller: "+l(b,a,"state")+", notifying view"),d("model.state.applications."+a+".state")),c(b[a].appMsg,f.state.applications[a].appMsg)&&(g.debug("WebApp.Controller: "+l(b,a,"appMsg")+", notifying view"),d("model.state.applications."+a+".appMsg")),void 0==b[a].media&&void 0!=f.state.applications[a].media){if(f.state.applications[a].media.assets&&0<f.state.applications[a].media.assets.length)for(g.debug("WebApp.Controller: app media data was created"),n=0;n<f.state.applications[a].media.assets.length;n++)d("model.state.applications."+
a+".media.assets."+n)}else void 0!=b[a].media&&void 0==f.state.applications[a].media?g.debug("WebApp.Controller: app media data was either deleted"):c(b[a].media.assets,f.state.applications[a].media.assets)&&f.state.applications[a].media.assets.length>b[a].media.assets.length&&(g.debug("WebApp.Controller: media asset list grew (from "+b[a].media.assets.length+" to "+f.state.applications[a].media.assets.length+"), notifying view"),d("model.state.applications."+a+".media.assets."+(f.state.applications[a].media.assets.length-
1)))}else if("players"==a[0]){if(g.debug("WebApp.Controller: player array update received"),b=f.state.players,f.state.players=a[1],0!=b.length)for(a=0;a<b.length;a++)c(b[a].currentProgram,f.state.players[a].currentProgram)&&(g.debug("WebApp.Controller: "+e(b,a,"currentProgram")+", notifying view"),d("model.state.players."+a+".currentProgram")),c(b[a].isBlocked,f.state.players[a].isBlocked)&&(g.debug("WebApp.Controller: "+e(b,a,"isBlocked")+", notifying view"),d("model.state.players."+a+".isBlocked")),
c(b[a].playRate,f.state.players[a].playRate)&&(g.debug("WebApp.Controller: "+e(b,a,"playRate")+", notifying view"),d("model.state.players."+a+".playRate")),c(b[a].source,f.state.players[a].source)&&(g.debug("WebApp.Controller: "+e(b,a,"source")+", notifying view"),d("model.state.players."+a+".source")),c(b[a].status,f.state.players[a].status)&&(g.debug("WebApp.Controller: "+e(b,a,"status")+", notifying view"),d("model.state.players."+a+".status")),c(b[a].position,f.state.players[a].position)&&(g.debug("WebApp.Controller: "+
e(b,a,"position")+", notifying view"),d("model.state.players."+a+".position")),c(b[a].availAudioLangs,f.state.players[a].availAudioLangs)&&(g.debug("WebApp.Controller: "+e(b,a,"availAudioLangs")+", notifying view"),d("model.state.players."+a+".availAudioLangs")),c(b[a].audioLang,f.state.players[a].audioLang)&&(g.debug("WebApp.Controller: "+e(b,a,"audioLang")+", notifying view"),d("model.state.players."+a+".audioLang")),c(b[a].availSubtitleLangs,f.state.players[a].availSubtitleLangs)&&(g.debug("WebApp.Controller: "+
e(b,a,"availSubtitleLangs")+", notifying view"),d("model.state.players."+a+".availSubtitleLangs")),c(b[a].subtitleLang,f.state.players[a].subtitleLang)?(g.debug("WebApp.Controller: "+e(b,a,"subtitleLang")+", notifying view"),d("model.state.players."+a+".subtitleLang")):c(b[a].subtitleLang.enable,f.state.players[a].subtitleLang.enable)&&(g.debug("WebApp.Controller: model.state.players."+a+".subtitleLang.enable changed from "+b[a].subtitleLang.enable+" to "+f.state.players[a].subtitleLang.enable+", notifying view"),
d("model.state.players."+a+".subtitleLang.enable")),c(b[a].teletextLang,f.state.players[a].teletextLang)&&(g.debug("WebApp.Controller: "+e(b,a,"teletextLang")+", notifying view"),d("model.state.players."+a+".teletextLang")),c(b[a].window,f.state.players[a].window)&&(g.debug("WebApp.Controller: "+e(b,a,"window")+", notifying view"),d("model.state.players."+a+".window"))}else"channelTuned"==a[0]&&(g.debug("WebApp.Controller: channel tuned update received - player "+a[1]+", channel "+a[2]),b=a[1],void 0!=
a[2]&&(f.state.players[b].source.idx=a[2],d("model.state.players."+b+".source","model.state.players."+b+".source")))};var q=null;this.getApplicationIndex=function(a){if(null!=q)return q;for(var b=0;b<f.state.applications.length;b++)if(window.name===f.state.applications[b].windowId)return q=b;if(void 0!=a)return a;g.error("WebApp.Controller: app index queried, but no app with window name "+window.name+" currently stored in model");throw Error("no app with window name "+window.name+" currently stored in model");
}};
!function(f,h){function l(c,e,d,f){if(!d)return[];var m=[],h,a,b,g;b=e.length;g=e[f];var t=e[f+1];if(f===b&&d._listeners){if("function"===typeof d._listeners)c&&c.push(d._listeners);else for(e=0,f=d._listeners.length;e<f;e++)c&&c.push(d._listeners[e]);return[d]}if("*"===g||"**"===g||d[g]){if("*"===g){for(h in d)"_listeners"!==h&&d.hasOwnProperty(h)&&(m=m.concat(l(c,e,d[h],f+1)));return m}if("**"===g){(g=f+1===b||f+2===b&&"*"===t)&&d._listeners&&(m=m.concat(l(c,e,d,b)));for(h in d)"_listeners"!==h&&
d.hasOwnProperty(h)&&("*"===h||"**"===h?(d[h]._listeners&&!g&&(m=m.concat(l(c,e,d[h],b))),m=m.concat(l(c,e,d[h],f))):m=h===t?m.concat(l(c,e,d[h],f+2)):m.concat(l(c,e,d[h],f)));return m}m=m.concat(l(c,e,d[g],f+1))}(a=d["*"])&&l(c,e,a,f+1);if(d=d["**"])if(f<b)for(h in d._listeners&&l(c,e,d,b),d)"_listeners"!==h&&d.hasOwnProperty(h)&&(h===t?l(c,e,d[h],f+2):h===g?l(c,e,d[h],f+1):(b={},b[h]=d[h],l(c,e,{"**":b},f+1)));else d._listeners?l(c,e,d,b):d["*"]&&d["*"]._listeners&&l(c,e,d["*"],b);return m}var e=
Array.isArray?Array.isArray:function(c){return"[object Array]"===Object.prototype.toString.call(c)};WebApp.EventEmitter=function(c){this._events={};c&&(c.delimiter&&(this.delimiter=c.delimiter),c.wildcard&&(this.wildcard=c.wildcard),this.wildcard&&(this.listenerTree={}))};WebApp.EventEmitter.prototype.delimiter=".";WebApp.EventEmitter.prototype.setMaxListeners=function(c){this._events||(this._events={});this._events.maxListeners=c};WebApp.EventEmitter.prototype.event="";WebApp.EventEmitter.prototype.once=
function(c,e){this.many(c,1,e);return this};WebApp.EventEmitter.prototype.many=function(c,e,d){function f(){0===--e&&l.off(c,f);d.apply(this,arguments)}var l=this;if("function"!==typeof d)throw Error("many only accepts instances of Function");f._origin=d;this.on(c,f);return l};WebApp.EventEmitter.prototype.emit=function(){this._events||(this._events={});var c=arguments[0];if("newListener"===c&&!this._events.newListener)return!1;if(this._all){for(var e=arguments.length,d=Array(e-1),f=1;f<e;f++)d[f-
1]=arguments[f];f=0;for(e=this._all.length;f<e;f++)this.event=c,this._all[f].apply(this,d)}if("error"===c&&!(this._all||this._events.error||this.wildcard&&this.listenerTree.error)){if(arguments[1]instanceof Error)throw arguments[1];throw Error("Uncaught, unspecified 'error' event.");}var h;this.wildcard?(h=[],e="string"===typeof c?c.split(this.delimiter):c.slice(),l.call(this,h,e,this.listenerTree,0)):h=this._events[c];if("function"===typeof h){this.event=c;if(1===arguments.length)h.call(this);else if(1<
arguments.length)switch(arguments.length){case 2:h.call(this,arguments[1]);break;case 3:h.call(this,arguments[1],arguments[2]);break;default:e=arguments.length;d=Array(e-1);for(f=1;f<e;f++)d[f-1]=arguments[f];h.apply(this,d)}return!0}if(h){e=arguments.length;d=Array(e-1);for(f=1;f<e;f++)d[f-1]=arguments[f];h=h.slice();f=0;for(e=h.length;f<e;f++)this.event=c,h[f].apply(this,d);return 0<h.length||this._all}return this._all};WebApp.EventEmitter.prototype.on=function(c,f){if("function"===typeof c)return this.onAny(c),
this;if("function"!==typeof f)throw Error("on only accepts instances of Function");this._events||(this._events={});this.emit("newListener",c,f);if(this.wildcard){a:{for(var d=c,d="string"===typeof d?d.split(this.delimiter):d.slice(),h=0,l=d.length;h+1<l;h++)if("**"===d[h]&&"**"===d[h+1])break a;h=this.listenerTree;for(l=d.shift();l;){h[l]||(h[l]={});h=h[l];if(0===d.length){h._listeners?"function"===typeof h._listeners?h._listeners=[h._listeners,f]:e(h._listeners)&&(h._listeners.push(f),h._listeners.warned||
(d=10,"undefined"!==typeof this._events.maxListeners&&(d=this._events.maxListeners),0<d&&h._listeners.length>d&&(h._listeners.warned=!0,console.error("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.",h._listeners.length),console.trace()))):h._listeners=f;break a}l=d.shift()}}return this}this._events[c]?"function"===typeof this._events[c]?this._events[c]=[this._events[c],f]:e(this._events[c])&&(this._events[c].push(f),
this._events[c].warned||(d=10,"undefined"!==typeof this._events.maxListeners&&(d=this._events.maxListeners),0<d&&this._events[c].length>d&&(this._events[c].warned=!0,console.error("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.",this._events[c].length),console.trace()))):this._events[c]=f;return this};WebApp.EventEmitter.prototype.onAny=function(c){this._all||(this._all=[]);if("function"!==typeof c)throw Error("onAny only accepts instances of Function");
this._all.push(c);return this};WebApp.EventEmitter.prototype.addListener=WebApp.EventEmitter.prototype.on;WebApp.EventEmitter.prototype.off=function(c,f){if("function"!==typeof f)throw Error("removeListener only takes instances of Function");var d,h=[];if(this.wildcard)d="string"===typeof c?c.split(this.delimiter):c.slice(),h=l.call(this,null,d,this.listenerTree,0);else{if(!this._events[c])return this;d=this._events[c];h.push({_listeners:d})}for(var m=0;m<h.length;m++){var r=h[m];d=r._listeners;if(e(d)){for(var a=
-1,b=0,g=d.length;b<g;b++)if(d[b]===f||d[b].listener&&d[b].listener===f||d[b]._origin&&d[b]._origin===f){a=b;break}if(0>a)break;this.wildcard?r._listeners.splice(a,1):this._events[c].splice(a,1);0===d.length&&(this.wildcard?delete r._listeners:delete this._events[c])}else if(d===f||d.listener&&d.listener===f||d._origin&&d._origin===f)this.wildcard?delete r._listeners:delete this._events[c]}return this};WebApp.EventEmitter.prototype.offAny=function(c){var e=0,d=0,f;if(c&&this._all&&0<this._all.length)for(f=
this._all,e=0,d=f.length;e<d;e++){if(c===f[e]){f.splice(e,1);break}}else this._all=[];return this};WebApp.EventEmitter.prototype.removeListener=WebApp.EventEmitter.prototype.off;WebApp.EventEmitter.prototype.removeAllListeners=function(c){if(0===arguments.length)return this._events&&(this._events={}),this;if(this.wildcard)for(var e="string"===typeof c?c.split(this.delimiter):c.slice(),e=l.call(this,null,e,this.listenerTree,0),d=0;d<e.length;d++)e[d]._listeners=null;else{if(!this._events[c])return this;
this._events[c]=null}return this};WebApp.EventEmitter.prototype.listeners=function(c){if(this.wildcard){var f=[];c="string"===typeof c?c.split(this.delimiter):c.slice();l.call(this,f,c,this.listenerTree,0);return f}this._events||(this._events={});this._events[c]||(this._events[c]=[]);e(this._events[c])||(this._events[c]=[this._events[c]]);return this._events[c]};WebApp.EventEmitter.prototype.listenersAny=function(){return this._all?this._all:[]};"function"===typeof define&&define.amd?define(function(){return WebApp.EventEmitter}):
f.EventEmitter2=WebApp.EventEmitter}("undefined"!==typeof process&&"undefined"!==typeof process.title&&"undefined"!==typeof exports?exports:"undefined"!==typeof window?window:null);
WebApp.Model=function(){var f=function(e,c){this.code=e;this.type=c},h=function(){this.applications=[];this.key=null;this.players=[]},l=function(e,c,f){this.id=e;this.sourceId=c;this.method=f;this.message={}};this.State=h;this.Application=function(e,c,f,d,h,m,r,a,b,g,t,q){this.id=e;this.name=c;this.shortSynopsis=f;this.isAdult=d;this.isViewable=h;this.isEntitled=m;this.products=[];this.pictures=[];this.url=r;this.inFocus=a;this.windowId=b;this.viewState=g;this.state=t;this.type=q;this.appMsg=new l;
this.reservedKeys=[];this.appKeys=[];this.modelSets=[];this.media={assets:[]}};this.Player=function(e,c,h,d,l,m,r,a){this.currentChannel=this.source=e;this.playRate=c;this.position=h;this.window=d;this.zIndex=l;this.duration=m;this.status=null;this.availAudioLangs=[];this.availSubtitleLangs=[];this.audioLang=new f(r,a);this.subtitleLang=new f(r,a);this.teletextLang=new f(r,a);this.restricted=this.mapLoc=null;this.isBlocked=!1};this.channels=[];this.state=new h;this.Channel=function(e,c,f,d,h,l,r,
a){this.idx=e;this.id=c;this.locator=f;this.lcn=d;this.name=h;this.pictures=l;this.viewable=r;this.isFav=!1;this.plcn=0};this.keymap=new function(){this.VK_EXIT=3;this.VK_BACK_SPACE=8;this.VK_ENTER=this.VK_OK=13;this.VK_KEYBOARD=16;this.VK_ACCEPT=30;this.VK_SPACE=32;this.VK_PAGE_UP=33;this.VK_PAGE_DOWN=34;this.VK_HOME=36;this.VK_LEFT=37;this.VK_UP=38;this.VK_RIGHT=39;this.VK_DOWN=40;this.VK_0=48;this.VK_1=49;this.VK_2=50;this.VK_3=51;this.VK_4=52;this.VK_5=53;this.VK_6=54;this.VK_7=55;this.VK_8=56;
this.VK_9=57;this.VK_A=65;this.VK_B=66;this.VK_C=67;this.VK_D=68;this.VK_E=69;this.VK_F=70;this.VK_G=71;this.VK_H=72;this.VK_I=73;this.VK_J=74;this.VK_K=75;this.VK_L=76;this.VK_M=77;this.VK_N=78;this.VK_O=79;this.VK_P=80;this.VK_Q=81;this.VK_R=82;this.VK_S=83;this.VK_T=84;this.VK_U=85;this.VK_V=86;this.VK_W=87;this.VK_X=88;this.VK_Y=89;this.VK_Z=90;this.VK_RED=403;this.VK_GREEN=404;this.VK_BLUE=406;this.VK_YELLOW=405;this.VK_DELETE=127;this.VK_HELP=156;this.VK_POWER=409;this.VK_CHANNEL_UP=427;this.VK_CHANNEL_DOWN=
428;this.VK_VOLUME_UP=447;this.VK_VOLUME_DOWN=448;this.VK_MUTE=449;this.VK_INFO=457;this.VK_GUIDE=458;this.VK_BACK=461;this.VK_MENU=462;this.VK_PAUSE=19;this.VK_REW=412;this.VK_STOP=413;this.VK_PLAY=415;this.VK_REC=416;this.VK_FF=417;this.VK_REW_SKIP=424;this.VK_FWD_SKIP=425;this.VK_FAV=433;this.VK_TELETEXT=459;this.VK_SUBTITLE=460};this.MediaAsset=function(e,c,f,d,h,l,r,a,b,g,t,q,k){this.id=e;this.name=c;this.URL=f;this.picture=d;this.type=h;this.mimeType=l;this.encoding=r;this.description=a;this.genre=
b;this.date=g;this.size=t;this.duration=q;this.ageRating=k}};