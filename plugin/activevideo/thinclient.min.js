var Kraken=function(){function d(d){(new Request({url:"http://session/client/properties.json",proxy:!1,onComplete:function(a){a=a.responseText||{channel:"tv:1537.99.9907"};"string"===typeOf(a)&&(a=JSON.parse(a));a&&a.channel&&(new Request({url:"http://appdev.io/kraken/v2/schedule/networks/HU/services.json",proxy:!1,data:{maxBatchSize:1,show:"name,udpStreamLink,channel.ref",dvbDec:a.channel.split(":")[1]},onSuccess:function(a){var e=a&&a.data;e&&0<e.length&&(new Request({url:String.sprintf("http://appdev.io/kraken/v2/schedule/data/HU/channels/%s/broadcasts.json?end>%s",
e[0].channel.ref,moment.utc().format("YYYY-MM-DD[T]HH:mm[Z]")),proxy:!1,data:{maxBatchSize:1,show:"ageRating,end,start,title,synopsis"},onSuccess:function(b){(b=b&&b.data)&&0<b.length&&d&&d(Object.merge({},b[0],{channel:e[0].name,udpStreamLink:e[0].udpStreamLink}))}})).send()}})).send()}})).send()}var h={};getter(h,"getCurrentChannel",function(){return d});return h}();
this.ThinClient=function(){function d(){k&&clearTimeout(k);Kraken.getCurrentChannel(function(a){f=a;a=+moment.utc(a.end)-Date.now();k=setTimeout(d,a);if(b.onChannelChanged)b.onChannelChanged()})}function h(){if(l=l||e.getElementsByTagName("video")[0])l.setAttribute("autoplay",""),g()}function m(){c++;1E3===c&&(c=1);g()}function a(){c--;0===c&&(c=999);g()}function g(a){c=a=a||c;d()}var e=document.body,b={},c=1,f={},k,l;getter(b,"init",function(){return h});getter(b,"up",function(){return m});getter(b,
"down",function(){return a});getter(b,"channel",function(){return new TVChannel(c,"")});setter(b,"channel",function(a){g(a)});getter(b,"program",function(){return new TVProgram(f.title,f.synopsis,+moment.utc(f.start),+moment.utc(f.end))});return b}();