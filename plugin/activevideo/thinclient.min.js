var Kraken=function(){function c(c){(new Request({url:"http://session/client/properties.json",proxy:!1,onComplete:function(a){a=a.responseText||{channel:"tv:1537.99.9907"};"string"===typeOf(a)&&(a=JSON.parse(a));a&&a.channel&&(new Request({url:"http://appdev.io/kraken/v2/schedule/networks/HU/services.json",proxy:!1,data:{maxBatchSize:1,show:"name,udpStreamLink,channel.ref",dvbDec:a.channel.split(":")[1]},onSuccess:function(a){var b=a&&a.data;b&&0<b.length&&(new Request({url:String.sprintf("http://appdev.io/kraken/v2/schedule/data/HU/channels/%s/broadcasts.json?end>%s",
b[0].channel.ref,moment.utc().format("YYYY-MM-DD[T]HH:mm[Z]")),proxy:!1,data:{maxBatchSize:1,show:"ageRating,end,start,title,synopsis"},onSuccess:function(a){(a=a&&a.data)&&0<a.length&&c&&c(Object.merge({},a[0],{channel:b[0].name,stream:b[0].udpStreamLink.href}))}})).send()}})).send()}})).send()}var f={};getter(f,"getCurrentChannel",function(){return c});return f}();
this.ThinClient=function(){function c(){b&&clearTimeout(b);Kraken.getCurrentChannel(function(g){d=g;g=+moment.utc(g.end)-Date.now();b=setTimeout(c,g);e.src=d.stream;if(a.onChannelChanged)a.onChannelChanged()})}function f(){if(e=e||h.getElementsByTagName("video")[0])e.setAttribute("autoplay",""),c()}var h=document.body,a={},d={},b,e;getter(a,"init",function(){return f});getter(a,"up",function(){return emptyFn});getter(a,"down",function(){return emptyFn});getter(a,"channel",function(){return new TVChannel(1,
d.channel)});setter(a,"channel",function(a){c()});getter(a,"program",function(){return new TVProgram(d.title,d.synopsis,+moment.utc(d.start),+moment.utc(d.end))});return a}();